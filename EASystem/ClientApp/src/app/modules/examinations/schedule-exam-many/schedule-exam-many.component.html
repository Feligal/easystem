<section>
  <h3 *ngIf="exam" style="text-align: center">{{exam.name}} Examination Schedule</h3>
  <mat-divider></mat-divider>
  <br />
  <mat-card>
    <mat-card-content>      
      <form style="margin:0 30px" fxLayoutGap="30px" #f="ngForm" (ngSubmit)="onSubmit()">
        <div fxLayoutAlign="space-between" fxLayout="row wrap">


          <mat-form-field>
            <mat-label>Exam Name</mat-label>
            <input matInput type="text" placeholder="Name"
                   ngModel #name="ngModel" name="name" required />
            <mat-hint>Please select exam.</mat-hint>
            <mat-error><span *ngIf="name.hasError('required')">Exam Name is a required field.</span></mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Schedule Date</mat-label>
            <input matInput [min]="minDate" required [matDatepicker]="picker" placeholder="Schedule Date" ngModel #dateFilter1="ngModel" name="dateFilter1" id="dateFilter1" (dateChange)="changeScheduleDate($event)" />
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Duration (Min) </mat-label>
            <mat-select ([value])="selected" ngModel name="duration" #duration="ngModel">
              <mat-option *ngFor="let duration of durationList" [value]="duration">
                {{duration}} Mins
              </mat-option>
            </mat-select>
            <mat-hint>Please select exam duration.</mat-hint>
            <mat-error><span *ngIf="dateFilter1.hasError('required')">Duration is a required field.</span></mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Number of Questions </mat-label>
            <mat-select ([value])="selected" name="numberQuestions" ngModel #numberQuestions="ngModel" required>
              <mat-option *ngFor="let number of questionNumbers" [value]="number">
                {{number}}
              </mat-option>
            </mat-select>
            <mat-hint>Please select number of questions.</mat-hint>
            <mat-error><span *ngIf="numberQuestions.hasError('required')">Number of questions is a required field.</span></mat-error>

          </mat-form-field>

          <mat-form-field>
            <input matInput type="text" name="examTime" placeholder="Exam Time"
                   ngModel #examTime="ngModel" required />
            <mat-hint>Please enter the Exam time.</mat-hint>
            <mat-error><span *ngIf="examTime.hasError('required')">Exam time is a required field.</span></mat-error>
            <mat-error><span *ngIf="examTime.hasError('maxlength')">Exam time must not be more that 60 characters.</span></mat-error>
          </mat-form-field>
        </div>
        <br />
        <mat-divider></mat-divider>
        <br />        
        <div style="width:100%">
          <h3 style="text-align: center">({{selection.selected.length}})  Candidates Selected</h3>
          <div fxLayout="row" fxLayoutAlign="flex-end">            
            <mat-form-field fxFlex="40%">
              <input matInput type="text" (keyup)="doFilter($event.target.value)" placeholder="Filter" />
            </mat-form-field>           
          </div>
          <table style="width:100%" mat-table [dataSource]="dataSource" matSort>
            <ng-container matColumnDef="index">
              <mat-header-cell *matHeaderCellDef>No</mat-header-cell>
              <mat-cell *matCellDef="let element;let i = index;">{{i + 1}}</mat-cell>
            </ng-container>

            <ng-container matColumnDef="image">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Image</th>
              <td mat-cell *matCellDef="let element">
                <img id="detail_{{element.id}}" *ngIf="element.portraitImage" alt="profile" src="/clientThumbnailPortraits/{{element.portraitImage}}" width="50" style="cursor:pointer; border-radius:50% " />
                <img id="detail_{{element.id}}" *ngIf="!element.portraitImage && element.gender==='Male'" alt="profile" src="/user-icon.png" width="50" style="cursor: pointer; border-radius: 50%" />
                <img id="detail_{{element.id}}" *ngIf="!element.portraitImage && element.gender==='Female'" alt="profile" src="/femaleavatar.png" width="50" style="cursor: pointer; border-radius: 50%" />
              </td>
            </ng-container>

            <ng-container matColumnDef="firstName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                First Name
              </th>
              <td mat-cell *matCellDef="let element">
                {{element.firstName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="lastName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Last Name</th>
              <td mat-cell *matCellDef="let element">
                {{element.lastName }}
              </td>
            </ng-container>

            <ng-container matColumnDef="gender">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Gender</th>
              <td mat-cell *matCellDef="let element">{{element.gender }}</td>
            </ng-container>

            <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
              <td mat-cell *matCellDef="let element">
                {{element.email }}
              </td>
            </ng-container>


            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox class="checkboxstyle" (change)="$event ? masterToggle() : null"
                              [checked]="selection.hasValue() && isAllSelected()"
                              [indeterminate]="selection.hasValue() && !isAllSelected()"
                              [aria-label]="checkboxLabel()">
                  Select
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox (click)="$event.stopPropagation()"
                              ngModel name="IdsToRemove_{{element.id}}"
                              value="{{element.id}}"
                              (change)="$event ? selection.toggle(element) : null"
                              [checked]="selection.isSelected(element)"
                              [aria-label]="checkboxLabel(element)">
                </mat-checkbox>
              </td>
            </ng-container>




            <tr mat-header-row *matHeaderRowDef="dataColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row;
        columns: dataColumns;
        let i = index;
        let even = even;"
                [ngClass]="{gray: even, 'highlight': selectedRowIndex == row.id }"
                (click)="highlight(row)">
            </tr>
          </table>
          <mat-paginator #paginator
                         [pageSize]="20"
                         [pageSizeOptions]="[20, 30, 40,50]">
          </mat-paginator>
          <br />
        </div>
        <br />
        <div fxLayoutAlign="center" fxLayoutGap="10px" fxLayout="row wrap">
          <button matTooltip="Save" mat-raised-button type="submit" color="primary" [disabled]="myForm.invalid"><mat-icon>save</mat-icon>Save</button>
          <button matTooltip="Clear" mat-raised-button type="reset"  color="warn"><mat-icon>clear</mat-icon>Reset</button>
          <button matTooltip="Cancel" mat-raised-button type="button" (click)="onCancel()" color="accent"><mat-icon>not_interested</mat-icon>Cancel</button>
        </div>
      </form><br />
    </mat-card-content>
  </mat-card>
</section>


